{"ast":null,"code":"import { useReducer, useEffect } from \"react\";\nimport axios from 'axios';\nconst ACTIONS = {\n  MAKE_REQUEST: 'make-request',\n  FETCH_DATA: 'get-data',\n  ERROR: 'error'\n};\nconst BASE_URL = \"https://cors-anywhere.herokuapp.com/https://jobs.github.com/positions.json\";\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case ACTIONS.MAKE_REQUEST:\n      return {\n        loading: true,\n        jobs: []\n      };\n\n    case ACTIONS.FETCH_DATA:\n      return { ...state,\n        loading: false,\n        jobs: action.payload.jobs\n      };\n\n    case ACTIONS.ERROR:\n      return { ...state,\n        loading: false,\n        error: action.payload.error,\n        jobs: []\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport default function fetchJobs(params, page) {\n  const [state, dispatch] = useReducer(reducer, {\n    jobs: [],\n    loading: true\n  });\n  useEffect(() => {\n    dispatch({\n      type: ACTIONS.MAKE_REQUEST\n    });\n    axios.get(BASE_URL, {\n      params: {\n        markdown: true,\n        page: page,\n        ...params\n      }\n    }).then(res => {\n      dispatch({\n        type: ACTIONS.FETCH_DATA,\n        payload: {\n          jobs: res.data\n        }\n      });\n    }).catch(e => {\n      dispatch({\n        type: ACTIONS.ERROR,\n        payload: {\n          error: e\n        }\n      });\n    });\n  }, [params, page]);\n  return state;\n}","map":{"version":3,"sources":["/Users/koladegureje/Desktop/test-vs-code/IRONHACK/Ironhack1/IronhackProj3/hire-my-dev/frontend/src/services/fetchjobs.js"],"names":["useReducer","useEffect","axios","ACTIONS","MAKE_REQUEST","FETCH_DATA","ERROR","BASE_URL","reducer","state","action","type","loading","jobs","payload","error","fetchJobs","params","page","dispatch","get","markdown","then","res","data","catch","e"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,SAArB,QAAsC,OAAtC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,OAAO,GAAG;AACZC,EAAAA,YAAY,EAAG,cADH;AAEZC,EAAAA,UAAU,EAAE,UAFA;AAGZC,EAAAA,KAAK,EAAE;AAHK,CAAhB;AAMA,MAAMC,QAAQ,GAAG,4EAAjB;;AAEA,SAASC,OAAT,CAAiBC,KAAjB,EAAwBC,MAAxB,EAAgC;AAC5B,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKR,OAAO,CAACC,YAAb;AACI,aAAO;AAAEQ,QAAAA,OAAO,EAAE,IAAX;AAAiBC,QAAAA,IAAI,EAAE;AAAvB,OAAP;;AACJ,SAAKV,OAAO,CAACE,UAAb;AACI,aAAO,EAAE,GAAGI,KAAL;AAAYG,QAAAA,OAAO,EAAE,KAArB;AAA4BC,QAAAA,IAAI,EAAEH,MAAM,CAACI,OAAP,CAAeD;AAAjD,OAAP;;AACJ,SAAKV,OAAO,CAACG,KAAb;AACI,aAAO,EAAE,GAAGG,KAAL;AAAYG,QAAAA,OAAO,EAAE,KAArB;AAA4BG,QAAAA,KAAK,EAAEL,MAAM,CAACI,OAAP,CAAeC,KAAlD;AAAyDF,QAAAA,IAAI,EAAE;AAA/D,OAAP;;AACJ;AACI,aAAOJ,KAAP;AARR;AAUH;;AAED,eAAe,SAASO,SAAT,CAAmBC,MAAnB,EAA2BC,IAA3B,EAAiC;AAC5C,QAAM,CAACT,KAAD,EAAQU,QAAR,IAAoBnB,UAAU,CAACQ,OAAD,EAAU;AAAEK,IAAAA,IAAI,EAAE,EAAR;AAAYD,IAAAA,OAAO,EAAE;AAArB,GAAV,CAApC;AAEAX,EAAAA,SAAS,CAAE,MAAM;AACbkB,IAAAA,QAAQ,CAAC;AAAER,MAAAA,IAAI,EAAER,OAAO,CAACC;AAAhB,KAAD,CAAR;AACAF,IAAAA,KAAK,CAACkB,GAAN,CAAUb,QAAV,EAAoB;AAChBU,MAAAA,MAAM,EAAE;AAAEI,QAAAA,QAAQ,EAAE,IAAZ;AAAkBH,QAAAA,IAAI,EAAEA,IAAxB;AAA8B,WAAGD;AAAjC;AADQ,KAApB,EAEGK,IAFH,CAESC,GAAG,IAAI;AACZJ,MAAAA,QAAQ,CAAC;AAAER,QAAAA,IAAI,EAAER,OAAO,CAACE,UAAhB;AAA4BS,QAAAA,OAAO,EAAE;AAAED,UAAAA,IAAI,EAAEU,GAAG,CAACC;AAAZ;AAArC,OAAD,CAAR;AACH,KAJD,EAIGC,KAJH,CAIUC,CAAC,IAAI;AACXP,MAAAA,QAAQ,CAAC;AAAER,QAAAA,IAAI,EAAER,OAAO,CAACG,KAAhB;AAAuBQ,QAAAA,OAAO,EAAE;AAAEC,UAAAA,KAAK,EAAEW;AAAT;AAAhC,OAAD,CAAR;AACH,KAND;AAQH,GAVQ,EAUN,CAACT,MAAD,EAASC,IAAT,CAVM,CAAT;AAYA,SAAOT,KAAP;AACH","sourcesContent":["import { useReducer, useEffect } from \"react\";\nimport axios from 'axios';\n\nconst ACTIONS = {\n    MAKE_REQUEST : 'make-request',\n    FETCH_DATA: 'get-data',\n    ERROR: 'error'\n}\n\nconst BASE_URL = \"https://cors-anywhere.herokuapp.com/https://jobs.github.com/positions.json\"\n\nfunction reducer(state, action) {\n    switch (action.type) {\n        case ACTIONS.MAKE_REQUEST:\n            return { loading: true, jobs: [] }\n        case ACTIONS.FETCH_DATA:\n            return { ...state, loading: false, jobs: action.payload.jobs }\n        case ACTIONS.ERROR:\n            return { ...state, loading: false, error: action.payload.error, jobs: [] }\n        default:\n            return state;\n    }\n}\n\nexport default function fetchJobs(params, page) {\n    const [state, dispatch] = useReducer(reducer, { jobs: [], loading: true } )\n\n    useEffect( () => {\n        dispatch({ type: ACTIONS.MAKE_REQUEST})\n        axios.get(BASE_URL, {\n            params: { markdown: true, page: page, ...params}\n        }).then( res => {\n            dispatch({ type: ACTIONS.FETCH_DATA, payload: { jobs: res.data } }) \n        }).catch( e => {\n            dispatch({ type: ACTIONS.ERROR, payload: { error: e } }) \n        })\n\n    }, [params, page])\n    \n    return state\n}"]},"metadata":{},"sourceType":"module"}